---
layout: post
tags: [가리사니, 기타]
---

> 이 문서는 예전 가리사니 사이트에서 작성된 문서 입니다.
현재 상황과 맞지 않을 수 있습니다.


# 서론
얼마전에 스프링 강의를 쓸때 우분투 설치시에 생략한 부분이 있었습니다.
필자는 VMware Player를 사용하고있고 Player 버전은 전책상 NAT 가상화 네트워크 관리 프로그램이 포함되어있지않습니다. 결국 Bridged 를 사용해야하며, 공유기를 사용중이지 않은 PC의 경우 인터넷제공자(인터넷회사)에 의해 매번 아이피가 바뀌게 되어 매번 아이피 설정을 해야하는 문제가 발생하게 됩니다.
그래서 하이퍼-V 를 설치하고 강의를 쓰기로 하였습니다.


# Hyper-V
- MS의 가상머신
- 처음부터 서버용을 위해 나온 머신으로 안정성이 좋다.
필수조건
- 서버군 : Windows Server 2008 이상.
- 데스크톱 : Windows 8 이상 Pro 이상의 에디션
- 하드웨어 가상화지원 (정말 오래된 PC가 아닌이상... 다지원합니다.)


# 1. 활성화
- 컴퓨터(내컴퓨터) -> 컴퓨터탭 -> 프로그램 제거 또는 변경
- Windows 기능 켜기/끄기
- Hyper-V 체크 -> 확인
====================================================
필자의 경우 상쾌하게 0x80071A90 오류가 나는군요...
- 네트워크 충돌로 나는 경우가 많으며, 최종 시작 프로그램을 모두 끈 후 시작 해야하지만 필자의 경우는 백신만 끄니 정상 작동하였습니다.
====================================================
- 윈도우 재부팅 (설치과정)


# 2. 가상스위치 만들기
- 실행(Windows + R) -> virtmgmt.msc (이하 하이퍼-V 실행)
- 동작 -> 가상 스위치 관리자
- 새 가상 네트워크 스위치 -> 내부 -> 가상 스위치 만들기 - 이름지정 -> 확인
(필자는 이름을 "개발 네트워크" 라고 지정했습니다.)
- 이제 윈도우의 네트워크 어뎁터 설정변경으로이동합니다.
- vEthernet (개발 네트워크) - > 속성 -> 인터넷 프로토콜 버전 4(TCP/IPv4) -> 속성
- 다음 IP 주소사용 : 192.168.159.1
(아이피는 값은 사용자 마음이지만 159 를 기준으로 설명함.)
- 서브넷 마스크 255.255.255.0
- DNS 8.8.8.8 / 8.8.4.4
- 확인
- 주 네트워크 (이더넷, 로컬네트워크) 로 되어있을 확률이 높음 -> 속성
- 공유탭 -> 다른 네트워크가 사용자가.... (체크) vEthernet (개발 네트워크) 설정
- 확인


# 2. 가상 컴퓨터 만들기
- 새로만들기 -> 가상컴퓨터
(설치 설정 일부 생략)
- 네트워크는 위에서 설정한 네트워크(개발 네트워크) 선택.
======================================================
2 세대에 우분투 까는법
- 새로만들기를 완료하고 실행하면 이미지를 인식하지 못 한다.
- 종료 / 끄기
- 속성 -> 하드웨어 -> 펌웨어 -> 보안부팅사용 (체크해제)
- 시동
- install ubuntu 선택
======================================================
(설치 설정 완료 및 설치 완료)


# 3. 우분투 설정
> ifconfig
- 처음시작하자마자 나오는게 네트워크 이름 일반적으로 eth0(이걸기준으로)
> sudo vim /etc/network/interfaces
- vim 이 없다면 설치하거나 다른것을 사용바람.
- 아래와 같이 작성합니다.
auto lo
iface lo inet loopback
auto eth0
iface eth0 inet static
address 192.168.159.2
netmask 255.255.255.0
gateway 192.168.159.1
dns-nameservers 8.8.8.8 8.8.4.4
- 저장 (8.8.... 는 구글의 DNS 서버)
- 192.168.159.2 : 2는 예제임으로 2말고 다른 숫자를 넣어도됨.
- 부팅
# 주의
인터넷에보면 /etc/resolv.conf 에서 DNS 를 설정하라는 말이있는데,
해당 파일에 들어가보시면 알겠지만 절대 직접 설정하지 말라고 써있습니다.
위 /etc/network/interfaces 에서 설정하면 자동으로 덮어쓰기 됩니다.


# 4. 확인
- 윈도우에서 cmd (windows + r : cmd 입력) 를 켠다.
> ping 192.168.159.2
핑이 제대로 가면 성공!