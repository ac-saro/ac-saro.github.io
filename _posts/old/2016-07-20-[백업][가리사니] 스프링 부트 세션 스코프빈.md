---
layout: post
tags: [spring, redis]
---

> 이 문서는 가리사니 개발자 포럼에 올렸던 글의 백업 파일입니다.
오래된 문서가 많아 현재 상황과 맞지 않을 수 있습니다.


# 스프링 부트 세션 시리즈
- [1. 스프링 부트 레디스 세션 연동](/2016/07/20/%EB%B0%B1%EC%97%85-%EA%B0%80%EB%A6%AC%EC%82%AC%EB%8B%88-%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B6%80%ED%8A%B8-%EB%A0%88%EB%94%94%EC%8A%A4-%EC%84%B8%EC%85%98-%EC%97%B0%EB%8F%99.html)
- [2. 스프링 부트 세션 스코프빈](/2016/07/20/%EB%B0%B1%EC%97%85-%EA%B0%80%EB%A6%AC%EC%82%AC%EB%8B%88-%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B6%80%ED%8A%B8-%EC%84%B8%EC%85%98-%EC%8A%A4%EC%BD%94%ED%94%84%EB%B9%88.html)
- [3. 스프링 부트 세션 컴포넌트](/2016/07/20/%EB%B0%B1%EC%97%85-%EA%B0%80%EB%A6%AC%EC%82%AC%EB%8B%88-%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B6%80%ED%8A%B8-%EC%84%B8%EC%85%98-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8.html)



# 서론
저번시간에 레디스 세션을 연결해 보았으니 이번엔 세션 스코프빈을 만들어보겠습니다.
``` java
@Scope(value="session", proxyMode = ScopedProxyMode.TARGET_CLASS)
@Component
@Data
public class SessionScope implements Serializable
{
	private static final long serialVersionUID = 1L;

	@Getter @Setter
	private String msg;

	@Getter @Setter
	private Date date;

	public String toString()
	{
		return msg + " : " + date;
	}
}
```


# 테스트 컨트롤
``` java
@Controller
public class UsingSessionTestController
{
	// 세션스코프
	@Autowired
	SessionScope sessionScope;

	@ResponseBody
	@RequestMapping(path="/se-set", produces="text/plain")
	public String seSet() throws UnsupportedEncodingException, FileNotFoundException, IOException
	{
		sessionScope.setMsg("Hi");
		sessionScope.setDate(new Date());
		return "SET session";
	}

	@ResponseBody
	@RequestMapping(path="/se-get", produces="text/plain")
	public String seGet()
	{
		return sessionScope.toString();
	}
}
```
/se-set 에서는 현재시간과 함게 Hi 가 입력되고.
/se-get 에서 꺼내볼 수 있으면 성공!!
레디스 데스크톱 매니저로 확인하면 sessionAttr:scopedTarget.sessionScope 라는 key 이름으로 SessionScope  클래스가 시리얼라이즈 되어 들어간게 확인됩니다.
@Component 에 값을 지정해주면 sessionAttr:scopedTarget.<@Component 값>으로 들어갑니다.
![](/file/old/153.png)