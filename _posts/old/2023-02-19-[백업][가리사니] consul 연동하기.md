---
layout: post
tags: [가리사니, 기타]
---

> 이 문서는 가리사니 개발자 포럼에 올렸던 글의 백업 파일입니다.
오래된 문서가 많아 현재 상황과 맞지 않을 수 있습니다.

앞서 노마드를 설치했다면 이번엔 consul을 연결 해보자.

콘술은 쉽게 설명하면 랜덤한 네트워크에 랜덤한 포트로 생성되는 네트워크를 서로 통신할 수 있게 알려주는 서비스라고 보면된다.

https://developer.hashicorp.com/consul
위 사이트에서 다운 받는다.

간단하게 설정 파일을 만들어 보자.
- 필자는 consul.hcl 라는 이름으로 파일을 생성하였다.
```
data_dir = "C:/consul/data"
datacenter = "dc1"
bind_addr = "0.0.0.0"
advertise_addr = "127.0.0.1"
log_level  = "INFO"
```

다음과 같이 실행해주자.

```
consul agent -config-file=consul.hcl
```
```
# 물론 테스트 목적이나 잠깐 볼 목적이라면 아래의 명령어로도 실행할 수 있다.
consul agent -dev
```

일전에 만들어 두었던 nomad.hcl 의 설정에도 콘술을 추가 재시작 해주자.
```
# 데이터 센터 이름, 저장위치
datacenter = "dc1"
data_dir   = "c:/nomad/data"

#  서버
server {
  enabled = true
  bootstrap_expect = 1
}

# 클라이언트
client {
  enabled = true
  network_interface = "CORENET"
}

consul {
  address = "127.0.0.1:8500"
}
```


여기까지 완료되었다면 성공이다.